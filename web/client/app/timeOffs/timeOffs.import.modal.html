<div class="modal-header">
    <h3 class="modal-title">Import Time Offs</h3>
</div>

<div class="modal-body">

    <div ng-show="model.step === 0">
        <div>
            <p>
                Select a csv file separated with ';'. The file should have column headers on the first row, and these fields: Email, ExternalId, Date, Amount
            </p>
            <div>
                <button type="button" class="btn btn-primary" ng-click="actions.selectFile()">Select csv file...</button>
                <input id="timeOffsFileInput" type="file" on-read-file="actions.readCompleted($fileName, $fileContent)" accept=".csv" />
                <span class="left-detached">{{model.fileName}} </span>
            </div>

        </div>
        <div class="top-detached">
            <pre ng-show="model.contentPreview">{{model.contentPreview}}</pre>
        </div>
        <div class="form-group top-detached" ng-show="model.contentPreview">
            <label class="control-label">Separator</label>
            <div class="btn-group combo" dropdown>
                <button type="button" class="btn btn-primary dropdown-toggle" dropdown-toggle>
                    <span>{{model.separatorChar}}</span><span class="caret"></span>
                </button>
                <ul class="dropdown-menu" role="menu">
                    <li>
                        <a ng-click="actions.selectSeparator(';')">;</a>
                    </li>
                    <li>
                        <a ng-click="actions.selectSeparator(',')">,</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div ng-show="model.step === 1">
        <div class="form-horizontal">
            <div class="form-group top-detached">
                <label class="control-label">Email:</label>
                <div class="btn-group combo" dropdown>
                    <button type="button" class="btn btn-primary dropdown-toggle" dropdown-toggle>
                        <span>{{model.fields[model.email]}}</span><span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" role="menu">
                        <li ng-repeat="field in model.fields">
                            <a ng-click="actions.selectEmail(field)">{{field}}</a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="form-group top-detached">
                <label class="col-xs-3 control-label">Date:</label>
                <div class="col-xs-8 btn-group combo" dropdown>
                    <button type="button" class="btn btn-primary dropdown-toggle" dropdown-toggle>
                        <span>{{model.fields[model.date]}}</span><span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" role="menu">
                        <li ng-repeat="field in model.fields">
                            <a ng-click="actions.selectDate(field)">{{field}}</a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="form-group top-detached">
                <label class="col-xs-3 control-label">Amount:</label>
                <div class="col-xs-8 btn-group combo" dropdown>
                    <button type="button" class="btn btn-primary dropdown-toggle" dropdown-toggle>
                        <span>{{model.fields[model.amount]}}</span><span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" role="menu">
                        <li ng-repeat="field in model.fields">
                            <a ng-click="actions.selectAmount(field)">{{field}}</a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="form-group top-detached">
                <label class="col-xs-3 control-label">ExternalId:</label>
                <div class="col-xs-8 btn-group combo" dropdown>
                    <button type="button" class="btn btn-primary dropdown-toggle" dropdown-toggle>
                        <span>{{model.fields[model.externalId]}}</span><span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" role="menu">
                        <li ng-repeat="field in model.fields">
                            <a ng-click="actions.selectExternalId(field)">{{field}}</a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="form-group top-detached">
                <label class="col-xs-3 control-label">Type:</label>
                <div class="col-xs-8 btn-group combo" dropdown>
                    <button type="button" class="btn btn-primary dropdown-toggle" dropdown-toggle>
                        <span>{{model.fields[model.type]}}</span><span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" role="menu">
                        <li ng-repeat="field in model.fields">
                            <a ng-click="actions.selectType(field)">{{field}}</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div ng-show="model.step === 2">
        <table class="table">
            <thead>
                <tr>
                    <th>
                        ExternalId
                    </th>
                    <th>
                        Email
                    </th>
                    <th>
                        Date
                    </th>
                    <th>
                        Amount
                    </th>
                    <th>
                        Type
                    </th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="row in model.rows | limitTo:5">
                    <td>
                        {{row[model.externalId]}}
                    </td>
                    <td>
                        {{row[model.email]}}
                    </td>
                    <td>
                        {{row[model.date]}}
                    </td>
                    <td>
                        {{row[model.amount]}}
                    </td>
                    <td>
                        {{row[model.type]}}
                    </td>
                </tr>
                <tr>
                    <td>
                        ...
                    </td>
                    <td>
                        ...
                    </td>
                    <td>
                        ...
                    </td>
                    <td>
                        ...
                    </td>
                    <td>
                        ...
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<div class="modal-footer">
    <button class="btn btn-primary" ng-click="actions.prev()" ng-disabled="!utils.prevEnabled()">&lt; Previous</button>
    <button class="btn btn-primary" ng-click="actions.next()" ng-disabled="!utils.nextEnabled()">Next &gt;</button>
</div>